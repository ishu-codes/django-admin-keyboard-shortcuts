{% extends "admin/base.html" %}
{% load static i18n shortcuts %}
{% load admin_urls %}

{% block extrahead %}
  {{ block.super }}
  {% block extrahead_shortcuts %}
    <link rel="stylesheet" href="{% static "admin/css/shortcuts.css" %}">
    <script>
      window.djangoAdminContext = {
        appLabel: '{{ app_label|default:"" }}',
        modelName: '{{ opts.model_name|default:"" }}',
        viewName: '{{ view_name|default:"" }}'
      };
    </script>
    <script src="{% static "admin/js/shortcuts.js" %}" async></script>
  {% endblock %}
{% endblock %}

{% block footer %}
  {{ block.super }}
  {% block shortcuts %}
  <button id="open-shortcuts" data-keyboard-shortcut="?">
    <kbd>?</kbd>
  </button>
  <dialog id="model-list-dialog">
    <div class="dialog-heading">
      <h2>{% translate "Models" %}</h2>
      <form method="dialog">
        <button aria-label="{% translate 'Close' %}">&#10006;</button>
      </form>
    </div>
    <form id="model-list-dialog-form">
      <label for="model-list-dialog-search">
        {% translate 'Search model' %}
      </label>
      <input
        type="search"
        id="model-list-dialog-search"
        placeholder="{% translate 'Start typing to search...' %}"
      >
    </form>
    <div>
      {% all_apps as apps %}
      {% for app_label, models in apps.items %}
        <section>
          <h3>{{ app_label }}</h3>
          <ul>
          {% for model in models %}
            <li>
              <a href="{{ model.url }}"{{ model.name }}>
                {{ model.name }}
              </a>
            </li>
          {% endfor %}
          </ul>
        </section>
      {% endfor %}
    </div>
  </dialog>

  <!-- Instance List Dialog -->
  <dialog id="instance-list-dialog">
    <div class="dialog-heading">
      <h2>{% translate "Instances" %}</h2>
      <form method="dialog">
        <button aria-label="{% translate 'Close' %}">&#10006;</button>
      </form>
    </div>
    <form id="instance-list-dialog-form">
      <label for="instance-list-dialog-search">
        {% translate 'Search instance' %}
      </label>
      <input
        type="search"
        id="instance-list-dialog-search"
        placeholder="{% translate 'Start typing to search...' %}"
      >
    </form>
    <div>
      {% if opts %}
        <section id="current-model-instances">
          <h3>{{ opts.verbose_name_plural|capfirst }}</h3>
          <ul>
          {% get_model_instances opts as instances %}
          {% for instance in instances %}
            <li>
              <a href="{% url opts|admin_urlname:'change' instance.pk %}"
                 data-instance-id="{{ instance.pk }}"
                 data-model-name="{{ opts.model_name }}">
                {{ instance }}
              </a>
            </li>
          {% endfor %}
          </ul>
        </section>
      {% endif %}
    </div>
  </dialog>

  <dialog id="shortcuts-dialog">
    <div class="dialog-heading">
      <h2>{% translate "Keyboard shortcuts" %}</h2>
      <form method="dialog">
        <button aria-label="{% translate 'Close' %}">&#10006;</button>
      </form>
    </div>
    <section>
      <h3>{% translate "Global" %}</h3>
      <ul>
        <li>
          <div class="shortcut-description">{% translate "Show this dialog" %}</div>
          <div class="shortcut-keys"><kbd>?</kbd></div>
        </li>
        <li>
          <div class="shortcut-description">{% translate "Go to the site index" %}</div>
          <div class="shortcut-keys"><kbd>g</kbd> <kbd>i</kdb></div>
        </li>
        <li>
          <div class="shortcut-description">{% translate "Go to a change list page" %}</div>
          <div class="shortcut-keys"><kbd>g</kbd> <kbd>l</kdb></div>
        </li>
      </ul>
    </section>
    {% endblock shortcuts %}
    {% block extra_shortcuts %}{% endblock %}
  </dialog>
{% endblock %}
